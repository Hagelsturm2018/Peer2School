{"remainingRequest":"/Users/jannikschilling/Documents/Hagelsturm2018.github.io/peer2school-master/node_modules/babel-loader/lib/index.js!/Users/jannikschilling/Documents/Hagelsturm2018.github.io/peer2school-master/node_modules/eslint-loader/index.js??ref--13-0!/Users/jannikschilling/Documents/Hagelsturm2018.github.io/peer2school-master/src/lib/usermedia.js","dependencies":[{"path":"/Users/jannikschilling/Documents/Hagelsturm2018.github.io/peer2school-master/src/lib/usermedia.js","mtime":1584780410000},{"path":"/Users/jannikschilling/Documents/Hagelsturm2018.github.io/peer2school-master/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/jannikschilling/Documents/Hagelsturm2018.github.io/peer2school-master/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/jannikschilling/Documents/Hagelsturm2018.github.io/peer2school-master/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsIjsKbmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IG5hdmlnYXRvclsnZ2V0VXNlck1lZGlhJ10gfHwgbmF2aWdhdG9yWyd3ZWJraXRHZXRVc2VyTWVkaWEnXSB8fCBuYXZpZ2F0b3JbJ21vekdldFVzZXJNZWRpYSddIHx8IG5hdmlnYXRvclsnbXNHZXRVc2VyTWVkaWEnXTsgLy8gcGVlcjIub24oJ3N0cmVhbScsIHN0cmVhbSA9PiB7Ci8vICAgbG9nKCdzdHJlYW0nKQovLwovLyAgIC8vIGdvdCByZW1vdGUgdmlkZW8gc3RyZWFtLCBub3cgbGV0J3Mgc2hvdyBpdCBpbiBhIHZpZGVvIHRhZwovLyAgIGlmICgnc3JjT2JqZWN0JyBpbiB2aWRlbykgewovLyAgICAgdmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtCi8vICAgfSBlbHNlIHsKLy8gICAgIHZpZGVvLnNyYyA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSkgLy8gZm9yIG9sZGVyIGJyb3dzZXJzCi8vICAgfQovLyAgIHZpZGVvLnBsYXkoKQovLyB9KQovLyBmdW5jdGlvbiBhZGRNZWRpYShzdHJlYW0pIHsKLy8gICBsb2coJ2FkZE1lZGlhJykKLy8gICBwZWVyMS5hZGRTdHJlYW0oc3RyZWFtKSAvLyA8LSBhZGQgc3RyZWFtcyB0byBwZWVyIGR5bmFtaWNhbGx5Ci8vIH0KCmV4cG9ydCBmdW5jdGlvbiBjb25uZWN0U3RyZWFtVG9WaWRlb0VsZW1lbnQoc3RyZWFtLCB2aWRlbykgewogIGlmICgnc3JjT2JqZWN0JyBpbiB2aWRlbykgewogICAgdmlkZW8uc3JjT2JqZWN0ID0gc3RyZWFtOwogIH0gZWxzZSB7CiAgICB2aWRlby5zcmMgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChzdHJlYW0pOyAvLyBmb3Igb2xkZXIgYnJvd3NlcnMKICB9CgogIHZpZGVvLnBsYXkoKTsKfQpleHBvcnQgZnVuY3Rpb24gZ2V0VXNlck1lZGlhKGZuKSB7CiAgZnVuY3Rpb24gZXJyb3JIYW5kbGVyKGVycikgewogICAgbG9nKCdlcnJvcicsIGVycik7CiAgfQoKICB0cnkgewogICAgLy8gU29sdXRpb24gdmlhIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80Nzk1ODk0OS8xNDA5MjcKICAgIC8vIE9ubHkgYXZhaWxhYmxlIGZvciBIVFRQUyEgU2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9NZWRpYURldmljZXMvZ2V0VXNlck1lZGlhI1NlY3VyaXR5CiAgICB2YXIgb3B0ID0gewogICAgICBhdWRpbzogdHJ1ZSwKICAgICAgdmlkZW86IHsKICAgICAgICBmYWNpbmdNb2RlOiAndXNlcicsCiAgICAgICAgZnJhbWVSYXRlOiB7CiAgICAgICAgICBpZGVhbDogMTAKICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgbmF2aWdhdG9yLmdldFVzZXJNZWRpYShvcHQsIGZuLCBlcnJvckhhbmRsZXIpOwogICAgfSBlbHNlIHsKICAgICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEob3B0KS50aGVuKGZuKVsiY2F0Y2giXShlcnJvckhhbmRsZXIpOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgY29uc29sZS5lcnJvcignRXhjZXB0aW9uOicsIGVycik7CiAgfQp9"},{"version":3,"sources":["/Users/jannikschilling/Documents/Hagelsturm2018.github.io/peer2school-master/src/lib/usermedia.js"],"names":["navigator","getUserMedia","connectStreamToVideoElement","stream","video","srcObject","src","window","URL","createObjectURL","play","fn","errorHandler","err","log","opt","audio","facingMode","frameRate","ideal","mediaDevices","then","console","error"],"mappings":";;;;AAAAA,SAAS,CAACC,YAAV,GACED,SAAS,CAAC,cAAD,CAAT,IACAA,SAAS,CAAC,oBAAD,CADT,IAEAA,SAAS,CAAC,iBAAD,CAFT,IAGAA,SAAS,CAAC,gBAAD,CAJX,C,CAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;;AAEA,OAAO,SAASE,2BAAT,CAAqCC,MAArC,EAA6CC,KAA7C,EAAoD;AACzD,MAAI,eAAeA,KAAnB,EAA0B;AACxBA,IAAAA,KAAK,CAACC,SAAN,GAAkBF,MAAlB;AACD,GAFD,MAEO;AACLC,IAAAA,KAAK,CAACE,GAAN,GAAYC,MAAM,CAACC,GAAP,CAAWC,eAAX,CAA2BN,MAA3B,CAAZ,CADK,CAC0C;AAChD;;AACDC,EAAAA,KAAK,CAACM,IAAN;AACD;AAED,OAAO,SAAST,YAAT,CAAsBU,EAAtB,EAA0B;AAE/B,WAASC,YAAT,CAAsBC,GAAtB,EAA2B;AACzBC,IAAAA,GAAG,CAAC,OAAD,EAAUD,GAAV,CAAH;AACD;;AAED,MAAI;AACF;AACA;AACA,QAAME,GAAG,GAAG;AACVC,MAAAA,KAAK,EAAE,IADG;AAEVZ,MAAAA,KAAK,EAAE;AACLa,QAAAA,UAAU,EAAE,MADP;AAELC,QAAAA,SAAS,EAAE;AACTC,UAAAA,KAAK,EAAE;AADE;AAFN;AAFG,KAAZ;;AASA,QAAI,OAAOnB,SAAS,CAACoB,YAAV,CAAuBnB,YAA9B,KAA+C,WAAnD,EAAgE;AAC9DD,MAAAA,SAAS,CAACC,YAAV,CAAuBc,GAAvB,EAA4BJ,EAA5B,EAAgCC,YAAhC;AACD,KAFD,MAEO;AACLZ,MAAAA,SAAS,CAACoB,YAAV,CAAuBnB,YAAvB,CAAoCc,GAApC,EAAyCM,IAAzC,CAA8CV,EAA9C,WAAwDC,YAAxD;AACD;AACF,GAjBD,CAkBA,OAAOC,GAAP,EAAY;AACRS,IAAAA,OAAO,CAACC,KAAR,CAAc,YAAd,EAA4BV,GAA5B;AACH;AACF","sourcesContent":["navigator.getUserMedia = (\n  navigator['getUserMedia'] ||\n  navigator['webkitGetUserMedia'] ||\n  navigator['mozGetUserMedia'] ||\n  navigator['msGetUserMedia']\n)\n\n// peer2.on('stream', stream => {\n//   log('stream')\n//\n//   // got remote video stream, now let's show it in a video tag\n//   if ('srcObject' in video) {\n//     video.srcObject = stream\n//   } else {\n//     video.src = window.URL.createObjectURL(stream) // for older browsers\n//   }\n//   video.play()\n// })\n\n// function addMedia(stream) {\n//   log('addMedia')\n//   peer1.addStream(stream) // <- add streams to peer dynamically\n// }\n\nexport function connectStreamToVideoElement(stream, video) {\n  if ('srcObject' in video) {\n    video.srcObject = stream\n  } else {\n    video.src = window.URL.createObjectURL(stream) // for older browsers\n  }\n  video.play()\n}\n\nexport function getUserMedia(fn) {\n\n  function errorHandler(err) {\n    log('error', err)\n  }\n\n  try {\n    // Solution via https://stackoverflow.com/a/47958949/140927\n    // Only available for HTTPS! See https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia#Security\n    const opt = {\n      audio: true,\n      video: {\n        facingMode: 'user',\n        frameRate: {\n          ideal: 10,\n        },\n      },\n    }\n    if (typeof navigator.mediaDevices.getUserMedia === 'undefined') {\n      navigator.getUserMedia(opt, fn, errorHandler)\n    } else {\n      navigator.mediaDevices.getUserMedia(opt).then(fn).catch(errorHandler)\n    }\n  }\n  catch (err) {\n      console.error('Exception:', err)\n  }\n}\n"]}]}